<ng-scrollbar class="scroll-event" thumbClass="white-scrollbars" track="all">
    <app-navbar-administrador paginaActual="citas"> </app-navbar-administrador>

    <div class="mi-div">



        <mat-card class="mi-card mat-elevation-z4" *ngIf="dataVista.visualizacion == 'Diaria'">


            <mat-card style="width: 80%; box-shadow: none;">

                <mat-card-header>
                    <mat-card-title style="padding-top: 18px; flex: 1 1 80%; font-size: 16px;color: #4F4E4E;">
                        Visualización:
                    </mat-card-title>
                    <mat-form-field appearance="outline" style=" width:12%;">
                        <mat-select [(value)]="dataVista.visualizacion"
                            style="color: #4F4E4E !important; padding-left:5px;">
                            <mat-option value="Diaria">Diaria</mat-option>
                            <mat-option value="Mensual">Mensual</mat-option>
                        </mat-select>
                    </mat-form-field>


                    <div
                        style="width: 50%; padding-top: 5px; padding-left: 30px; color: #4F4E4E; text-align: center; font-size: 24px;">
                        <button mat-icon-button (click)="fechaAnterior()">
                            <mat-icon style="font-size: 48px; margin-right: 50px;">arrow_left</mat-icon>
                        </button>
                        <mat-label style="padding-left: 10px;"> {{fecha}} </mat-label>
                        <button mat-icon-button (click)="fechaSiguiente()">
                            <mat-icon style="font-size: 48px;  margin-right: 30px;">arrow_right</mat-icon>
                        </button>
                    </div>



                    <button mat-raised-button class="mi-boton"
                        style="position: absolute; right: 20px; margin-top: 7px; margin-bottom: 15px !important;"
                        (click)="registrarCita()">Nueva Cita</button>

                </mat-card-header>


                <mat-card-content>

                    <table mat-table [dataSource]="dataSource" matSort class=" mi-table">

                        <!-- Name Column -->
                        <ng-container matColumnDef="nombre" class="mi-column">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mi-primera-columna">
                                Nombre completo </th>
                            <td mat-cell *matCellDef="let cita" class="mi-primera-columna">
                                {{getNombre(cita)}}
                            </td>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="cedula" class="mi-column">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                Número de identificación </th>
                            <td mat-cell *matCellDef="let cita"> Identificación: {{cita.cedula_paciente}}
                            </td>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="fechahora" class="mi-column">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                Fecha y hora </th>
                            <td mat-cell *matCellDef="let cita"> {{getFechaHora(cita)}}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="descargar">
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Descargar cita
                            </th>
                            <td mat-cell *matCellDef="let cita" style="text-align: center;">
                                <button mat-icon-button (click)="editarCita(cita)">
                                    <mat-icon>get_app</mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="editar">
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Editar </th>
                            <td mat-cell *matCellDef="let cita" style="text-align: center;">
                                <button mat-icon-button (click)="editarCita(cita)">
                                    <mat-icon>edit</mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="borrar" class="mi-column">
                            <th mat-header-cell *matHeaderCellDef> Borrar </th>
                            <td mat-cell *matCellDef="let cita">
                                <button mat-icon-button (click)="borrarCita(cita)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="acciones">
                            <th mat-header-cell *matHeaderCellDef class="mi-ultima-columna"> Acciones </th>
                            <td mat-cell *matCellDef="let cita" class="mi-ultima-columna">
                                <button mat-raised-button (click)="editarCita(cita)" class="mi-boton">
                                    Iniciar cita
                                </button>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="mi-header"></tr>

                        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="mi-row"> </tr>

                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No se han encontrado citas para este día</td>
                        </tr>

                    </table>

                    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

                </mat-card-content>


            </mat-card>

        </mat-card>




        <mat-card class="mi-card mat-elevation-z4" *ngIf="dataVista.visualizacion == 'Mensual'">


            <mat-card style="width: 80%; box-shadow: none;">

                <mat-card-header>
                    <mat-card-title style="padding-top: 18px; flex: 1 1 80%; font-size: 16px;color: #4F4E4E;">
                        Visualización:
                    </mat-card-title>
                    <mat-form-field appearance="outline" style=" width:12%;">
                        <mat-select [(value)]="dataVista.visualizacion"
                            style="color: #4F4E4E !important; padding-left:5px;">
                            <mat-option value="Diaria">Diaria</mat-option>
                            <mat-option value="Mensual">Mensual</mat-option>
                        </mat-select>
                    </mat-form-field>


                    <div
                        style="width: 50%; padding-top: 5px; padding-left: 30px; color: #4F4E4E; text-align: center; font-size: 24px;">
                        <button mat-icon-button (click)="fechaAnterior()">
                            <mat-icon style="font-size: 48px; margin-right: 50px;">arrow_left</mat-icon>
                        </button>
                        <mat-label style="padding-left: 10px;"> {{fecha}} </mat-label>
                        <button mat-icon-button (click)="fechaSiguiente()">
                            <mat-icon style="font-size: 48px;  margin-right: 30px;">arrow_right</mat-icon>
                        </button>
                    </div>



                    <button mat-raised-button class="mi-boton"
                        style="position: absolute; right: 20px; margin-top: 7px; margin-bottom: 15px !important;"
                        (click)="registrarCita()">Nueva Cita</button>

                </mat-card-header>


                <mat-card-content>










                    <!--
                    <div class="row text-center">
                        <div class="col-md-4">
                            <div class="btn-group">
                                <div class="btn btn-primary" mwlCalendarPreviousView [view]="view"
                                    [(viewDate)]="viewDate" (viewDateChange)="closeOpenMonthViewDay()">
                                    Previous
                                </div>
                                <div class="btn btn-outline-secondary" mwlCalendarToday [(viewDate)]="viewDate">
                                    Today
                                </div>
                                <div class="btn btn-primary" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate"
                                    (viewDateChange)="closeOpenMonthViewDay()">
                                    Next
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
                        </div>
                        <div class="col-md-4">
                            <div class="btn-group">
                                <div class="btn btn-primary" (click)="setView(CalendarView.Month)"
                                    [class.active]="view === CalendarView.Month">
                                    Month
                                </div>
                                <div class="btn btn-primary" (click)="setView(CalendarView.Week)"
                                    [class.active]="view === CalendarView.Week">
                                    Week
                                </div>
                                <div class="btn btn-primary" (click)="setView(CalendarView.Day)"
                                    [class.active]="view === CalendarView.Day">
                                    Day
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                    -->
                    <div [ngSwitch]="view">
                        <mwl-calendar-month-view *ngSwitchCase="CalendarView.Month" [viewDate]="viewDate"
                            [events]="events" [refresh]="refresh" [activeDayIsOpen]="activeDayIsOpen"
                            (dayClicked)="dayClicked($event.day)" (eventClicked)="handleEvent('Clicked', $event.event)"
                            (eventTimesChanged)="eventTimesChanged($event)">
                        </mwl-calendar-month-view>
                        <mwl-calendar-week-view *ngSwitchCase="CalendarView.Week" [viewDate]="viewDate"
                            [events]="events" [refresh]="refresh" (eventClicked)="handleEvent('Clicked', $event.event)"
                            (eventTimesChanged)="eventTimesChanged($event)">
                        </mwl-calendar-week-view>
                        <mwl-calendar-day-view *ngSwitchCase="CalendarView.Day" [viewDate]="viewDate" [events]="events"
                            [refresh]="refresh" (eventClicked)="handleEvent('Clicked', $event.event)"
                            (eventTimesChanged)="eventTimesChanged($event)">
                        </mwl-calendar-day-view>
                    </div>

















                </mat-card-content>


            </mat-card>
        </mat-card>

    </div>
    <br />

</ng-scrollbar>